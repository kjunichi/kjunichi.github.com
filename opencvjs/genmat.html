<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Hello OpenCV.js</title>
	</head>
	<body>
		<h2>Hello OpenCV.js</h2>
		<p id="status">OpenCV.js is loading...</p>
		<div>
			<div class="inputoutput">
				<button id="btn">test</button>
			</div>
			<div class="inputoutput">
				<canvas id="canvasOutput" width="128" height="128" ></canvas>
				<div class="caption">canvasOutput</div>
			</div>
		</div>
		<script type="text/javascript">
const b = document.getElementById("btn");
b.addEventListener("click",(e)=>{
  const src = new cv.Mat(128,128,cv.CV_8UC3);
  
  for(let j = 0; j < 128; j++){ 
    for(let i = 0; i < 32; i++) {
      src.data[j * src.cols * src.channels() + i * src.channels()]=j*2;
      src.data[j * src.cols * src.channels() + i * src.channels()+1]=0;//i*64;
      src.data[j * src.cols * src.channels() + i * src.channels()+2]=0;//i*32;
    }
  }
  cv.imshow("canvasOutput", src);
  src.delete();
});
			
function onOpenCvReady() {
  document.getElementById('status').innerHTML = 'OpenCV.js is ready.';
  
}
		</script>
		<script async src="opencv.js" onload="onOpenCvReady();" type="text/javascript"></script>
	</body>
</html>
